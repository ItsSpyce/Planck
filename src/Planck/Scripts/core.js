var planck=function(){"use strict";function W(e,t,o){return new Promise(r=>{function a(n){n.data.operationId===t&&(typeof o>"u"||o(n.data.body))&&(r(n.data.body),console.debug("Received webmessage",t,n.data),window.chrome.webview.removeEventListener("message",a))}window.chrome.webview.addEventListener("message",a),window.chrome.webview.postMessage({...e,operationId:t}),console.debug("Posted webmessage",t,e)})}function g(e,t,o){let r=null;function a(n){n.data.operationId===t&&(typeof o>"u"||o(n.data.body))&&(r=n.data.body,console.debug("Received webmessage",t,n.data),window.chrome.webview.removeEventListener("message",a))}return window.chrome.webview.addEventListener("message",a),window.chrome.webview.postMessage({...e,operationId:t}),console.debug("Posted sync webmessage",t,e),r}function T(){let e=-1;return{current:e,next(){return e===Number.MAX_SAFE_INTEGER?e=0:e++,e}}}const m=T();async function s(e,t){const o=m.next(),[r]=await W({command:e,body:t},o);return r}function I(e,t){const o=m.next(),[r]=g({command:e,body:t},o);return r}function u(e,t,o,r){if(o==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return o==="m"?r:o==="a"?r.call(e):r?r.value:t.get(e)}function b(e,t,o,r,a){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?a.call(e,o):a?a.value=o:t.set(e,o),o}var d,c,h;const D=1024;class _{constructor(t){d.set(this,void 0),c.set(this,void 0),h.set(this,void 0),b(this,c,t,"f"),b(this,d,new ArrayBuffer(Math.min(t.length,D)),"f")}[(d=new WeakMap,c=new WeakMap,h=new WeakMap,Symbol.asyncIterator)](){}async readToEnd(){return await s("READ_STREAM",{id:u(this,c,"f").id})}async readNext(){return await s("READ_STREAM_CHUNK",{id:u(this,c,"f").id})}chunk(){return u(this,d,"f")?u(this,d,"f"):null}async close(){return await s("CLOSE_STREAM",{id:u(this,c,"f").id})}}const y=Object.create(null);async function L(e){if(e in y)return y[e];const t=await s("LOAD_MODULE",{id:e});return await A(e,t)}const j="fn:";var f;(function(e){e.string="string",e.boolean="boolean",e.number="number",e.object="object",e.stream="stream",e.array="array",e.void="void",e.fn_string="fn:string",e.fn_boolean="fn:boolean",e.fn_number="fn:number",e.fn_object="fn:object",e.fn_stream="fn:stream",e.fn_array="fn:array",e.fn_void="fn:void"})(f||(f={}));async function A(e,t){const o=Object.create(null),r=t.reduce((a,n)=>({...a,[n.name]:n}),Object.create(null));return new Proxy(o,{get(a,n,w){if(typeof a[n]<"u")return a[n];if(typeof n=="symbol")return Reflect.get(a,n,w);const i=r[n];if(!(typeof i>"u")&&i.hasGetter){if(i.returnType.startsWith(j))return async function(...l){const O=await s("INVOKE_MODULE_METHOD",{id:e,method:n,args:l});switch(i.returnType){case f.fn_stream:return new _(O);default:return O}};{const l=I("GET_MODULE_PROP",{prop:n,id:e,args:{}});switch(i.returnType){case f.stream:return new _(l);default:return l}}}},set(a,n,w,i){if(typeof n=="string"&&typeof r[n]<"u")throw"Cannot set the value on a remote module property";return a[n]=w},deleteProperty(a,n){return typeof n=="string"&&typeof r[n]<"u"&&r[n].returnType===f.stream?(a[n].close(),delete a[n]):!1},has(a,n){return Object.hasOwn(a,n)}})}function v(e){return document.title=e,s("SET_WINDOW_TITLE",{title:e})}function P(e,t){return s("SET_WINDOW_SIZE",{width:e,height:t})}function p(){return s("SET_WINDOW_STATE","normal")}function M(){return s("SET_WINDOW_STATE","minimized")}function N(e){return s("SET_WINDOW_STATE",e)}var R=Object.freeze({__proto__:null,hideWindow:M,setTitle:v,setWindowSize:P,setWindowState:N,showWindow:p});function F(){window.addEventListener("contextmenu",e=>e.preventDefault()),document.addEventListener("DOMContentLoaded",()=>{E();const e=document.querySelector("title");new MutationObserver(o=>{o.forEach(E)}).observe(e,{childList:!0})})}function E(){v(document.title)}F();const S=Object.create(R);return Object.defineProperties(S,{sendMessage:{value:s,enumerable:!1,writable:!1},import:{enumerable:!1,writable:!1,value:L}}),S}();
