var planck=function(){"use strict";function c(e,t,r){return new Promise(o=>{function a(n){n.data.operationId===t&&(typeof r>"u"||r(n.data.body))&&(o(n.data.body),console.debug("Received webmessage",t,n.data),window.chrome.webview.removeEventListener("message",a))}window.chrome.webview.addEventListener("message",a),window.chrome.webview.postMessage({...e,operationId:t}),console.debug("Posted webmessage",t,e)})}function v(e,t,r){let o=null;function a(n){n.data.operationId===t&&(typeof r>"u"||r(n.data.body))&&(o=n.data.body[0],console.debug("Received webmessage",t,n.data),window.chrome.webview.removeEventListener("message",a))}return window.chrome.webview.addEventListener("message",a),window.chrome.webview.postMessage({...e,operationId:t}),console.debug("Posted sync webmessage",t,e),o}function u(){let e=-1;return{current:e,next(){return e===Number.MAX_SAFE_INTEGER?e=0:e++,e}}}const l=u();function s(e,t){const r=l.next();return c({command:e,body:t},r)}const d=u(),w=Object.create(null);async function O(e){if(e in w)return w[e];const[t]=await c({command:"LOAD_MODULE",body:{id:e}},d.next());return await W(e,t)}const h="fn:";var f;(function(e){e.string="string",e.boolean="boolean",e.number="number",e.object="object",e.stream="stream",e.array="array",e.void="void",e[e.fn_string=0]="fn_string",e[e.fn_boolean=0]="fn_boolean",e[e.fn_number=0]="fn_number",e[e.fn_object=0]="fn_object",e[e.fn_stream=0]="fn_stream",e[e.fn_array=0]="fn_array",e[e.fn_void=0]="fn_void"})(f||(f={}));async function W(e,t){const r=Object.create(null),o=t.reduce((a,n)=>({...a,[n.name]:n}),Object.create(null));return new Proxy(r,{get(a,n,E){if(typeof n=="symbol")return Reflect.get(a,n,E);const i=o[n];if(!(typeof i>"u")&&i.hasGetter){if(i.returnType.startsWith(h))switch(i.returnType){case f.fn_stream:throw new Error("Not implemented");default:return async function(...I){const[N]=await c({command:"INVOKE_MODULE_METHOD",body:{id:e,method:n,args:I}},d.next());return N}}return v({command:"GET_MODULE_PROP",body:{prop:n,id:e,args:{}}},d.next())}},deleteProperty(){return!1},has(a,n){return Object.hasOwn(a,n)}})}function b(e){return document.title=e,s("SET_WINDOW_TITLE",{title:e})}function g(e,t){return s("SET_WINDOW_SIZE",{width:e,height:t})}function S(){return s("SET_WINDOW_STATE","normal")}function D(){return s("SET_WINDOW_STATE","minimized")}function L(e){return s("SET_WINDOW_STATE",e)}var y=Object.freeze({__proto__:null,hideWindow:D,setTitle:b,setWindowSize:g,setWindowState:L,showWindow:S});function j(){window.addEventListener("contextmenu",e=>e.preventDefault()),document.addEventListener("DOMContentLoaded",()=>{m();const e=document.querySelector("title");new MutationObserver(r=>{r.forEach(m)}).observe(e,{childList:!0})})}function m(){b(document.title)}j();const _=Object.create(y);return Object.defineProperties(_,{sendMessage:{value:s,enumerable:!1,writable:!1},import:{enumerable:!1,writable:!1,value:O}}),_}();
